<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gadget Essentials PH | Pro Secure Store</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

<style>
:root{
 --bg-gradient:linear-gradient(135deg,#0ea5e9,#22c55e);
 --card-bg:rgba(255,255,255,0.2);
 --text-color:white;
}

body.dark{
 --bg-gradient:linear-gradient(135deg,#0f172a,#1e293b);
 --card-bg:rgba(30,41,59,0.6);
 --text-color:#f1f5f9;
}

body{
 margin:0;
 font-family:Poppins,Segoe UI,Arial;
 background:var(--bg-gradient);
 transition:.4s;
}

.container{
 max-width:1200px;
 margin:auto;
 padding:20px;
}

/* PRODUCT GRID */
.products{
 display:grid;
 grid-template-columns:repeat(4,1fr);
 gap:20px;
 margin-top:30px;
}

@media(max-width:1024px){
 .products{grid-template-columns:repeat(2,1fr);}
}

@media(max-width:600px){
 .products{grid-template-columns:1fr;}
}

/* PRODUCT CARD */
.card{
 backdrop-filter:blur(15px);
 background:var(--card-bg);
 border-radius:20px;
 padding:15px;
 color:var(--text-color);
 box-shadow:0 8px 32px rgba(0,0,0,.2);
 transition:.3s;
}

.card:hover{
 transform:translateY(-8px);
}

.card img{
 width:100%;
 aspect-ratio:1/1;
 object-fit:cover;
 border-radius:15px;
 transition:.4s;
}

.card img:hover{
 transform:scale(1.08);
}

/* BUTTONS */
button{
 width:100%;
 padding:10px;
 border:none;
 border-radius:10px;
 margin-top:8px;
 font-weight:bold;
 cursor:pointer;
}

.primary{
 background:#2563eb;
 color:white;
}

.edit{
 background:#f59e0b;
 color:white;
}

.delete{
 background:#ef4444;
 color:white;
}

/* ADMIN */
.admin-panel{
 display:none;
 background:white;
 padding:25px;
 border-radius:20px;
 margin-top:20px;
}

.admin-panel input,
.admin-panel textarea{
 width:100%;
 padding:10px;
 margin-top:8px;
 border-radius:8px;
 border:1px solid #ccc;
}

/* LOGIN */
.login-box{
 background:white;
 padding:25px;
 border-radius:20px;
 margin-top:20px;
}

.toggle-mode{
 background:#111827;
 color:white;
 padding:8px 15px;
 border-radius:20px;
 border:none;
 cursor:pointer;
}

/* MESSENGER */
.messenger{
 position:fixed;
 bottom:20px;
 right:20px;
 background:#0084ff;
 width:60px;
 height:60px;
 border-radius:50%;
 display:flex;
 justify-content:center;
 align-items:center;
 color:white;
 font-size:28px;
 cursor:pointer;
 box-shadow:0 8px 20px rgba(0,0,0,.3);
 animation:float 2s infinite ease-in-out;
 z-index:999;
}

@keyframes float{
 0%,100%{transform:translateY(0);}
 50%{transform:translateY(-8px);}
}

#offlineBanner{
 display:none;
 background:#f59e0b;
 color:white;
 padding:10px;
 text-align:center;
 font-weight:bold;
}
</style>
</head>

<body>

<div id="offlineBanner">
‚ö† You are viewing offline mode
</div>

<div class="container">

<h1 style="color:var(--text-color)">üõí Gadget Essentials PH</h1>

<button class="toggle-mode" onclick="toggleMode()">üåô Toggle Mode</button>

<!-- LOGIN -->
<div class="login-box" id="adminLogin">
<h2>üîê Admin Login</h2>
<input type="password" id="adminPassword" placeholder="Enter Password">
<button class="primary" onclick="checkPassword()">Login</button>
</div>

<!-- ADMIN PANEL -->
<div class="admin-panel" id="adminPanel">
<h2>Product Editor</h2>

<input type="hidden" id="editIndex">

<input id="pname" placeholder="Product Name">
<textarea id="pdesc" placeholder="Product Description"></textarea>
<input id="pprice" placeholder="Price">
<input id="pimg" placeholder="Image URL">
<input id="plink" placeholder="Shopee Link">

<button class="primary" onclick="saveProduct()">Save Product</button>

<button class="delete" onclick="logoutAdmin()">Logout</button>
</div>

<!-- PRODUCTS -->
<div class="products" id="products"></div>

</div>

<div class="messenger" onclick="openMessenger()">üí¨</div>

<script>

/* ===== SECURITY ===== */
const ADMIN_PASSWORD="GEPH2026";
let isAdmin=sessionStorage.getItem("adminLogged")==="true";

/* ===== LOGIN ===== */
function checkPassword(){
 let pass=document.getElementById("adminPassword").value;

 if(pass===ADMIN_PASSWORD){
  sessionStorage.setItem("adminLogged","true");
  isAdmin=true;
  showAdmin();
  alert("‚úÖ Secure Access Granted");
 }else{
  alert("‚ùå Wrong Password");
 }
}

function logoutAdmin(){
 sessionStorage.removeItem("adminLogged");
 isAdmin=false;
 hideAdmin();
}

/* ===== ADMIN UI ===== */
function showAdmin(){
 document.getElementById("adminLogin").style.display="none";
 document.getElementById("adminPanel").style.display="block";
}

function hideAdmin(){
 document.getElementById("adminLogin").style.display="block";
 document.getElementById("adminPanel").style.display="none";
}

/* ===== PRODUCT SYSTEM ===== */
let products=JSON.parse(localStorage.getItem("products"))||[];

function saveProduct(){

 if(!isAdmin){
  alert("Login first");
  return;
 }

 let name=pname.value;
 let desc=pdesc.value;
 let price=pprice.value;
 let img=pimg.value;
 let link=plink.value;
 let editIndex=editIndexField.value;

 if(!name||!price||!link){
  alert("Fill all fields");
  return;
 }

 if(editIndex===""){
  products.push({
   name,desc,price,image:img||"https://via.placeholder.com/500",link
  });
 }else{
  products[editIndex]={name,desc,price,image:img,link};
 }

 localStorage.setItem("products",JSON.stringify(products));
 clearForm();
 renderProducts();
}

const pname=document.getElementById("pname");
const pdesc=document.getElementById("pdesc");
const pprice=document.getElementById("pprice");
const pimg=document.getElementById("pimg");
const plink=document.getElementById("plink");
const editIndexField=document.getElementById("editIndex");

function clearForm(){
 pname.value="";
 pdesc.value="";
 pprice.value="";
 pimg.value="";
 plink.value="";
 editIndexField.value="";
}

function editProduct(index){
 let p=products[index];
 editIndexField.value=index;
 pname.value=p.name;
 pdesc.value=p.desc;
 pprice.value=p.price;
 pimg.value=p.image;
 plink.value=p.link;
 window.scrollTo({top:0,behavior:"smooth"});
}

function deleteProduct(index){
 products.splice(index,1);
 localStorage.setItem("products",JSON.stringify(products));
 renderProducts();
}

function renderProducts(){

 function renderProducts(){

 let container=document.getElementById("products");
 container.innerHTML="";

 products.forEach((p,index)=>{
  let card=document.createElement("div");
  card.className="card";

  let adminButtons = "";

  // Show edit & delete ONLY if admin is logged in
  if(isAdmin){
    adminButtons = `
    <button class="edit" onclick="editProduct(${index})">Edit</button>
    <button class="delete" onclick="deleteProduct(${index})">Delete</button>
    `;
  }

  card.innerHTML=`
   <img src="${p.image}">
   <h3>${p.name}</h3>
   <p>${p.desc || ""}</p>
   <p><b>‚Ç±${p.price}</b></p>

   <button class="primary" onclick="window.open('${p.link}','_blank')">
   Buy Now
   </button>

   ${adminButtons}
  `;

  container.appendChild(card);
 });

 gsap.from(".card",{y:30,opacity:0,stagger:0.1});
}
/* ===== UI FEATURES ===== */
function toggleMode(){
 document.body.classList.toggle("dark");
}

function openMessenger(){
 window.open("https://m.me/YOUR_FACEBOOK_PAGE","_blank");
}

/* ===== OFFLINE DETECTOR ===== */
function updateOnlineStatus(){
 document.getElementById("offlineBanner").style.display =
 navigator.onLine ? "none" : "block";
}

window.addEventListener("load",()=>{
 updateOnlineStatus();
 renderProducts();

 if(isAdmin) showAdmin();
 else hideAdmin();
});

window.addEventListener("online",updateOnlineStatus);
window.addEventListener("offline",updateOnlineStatus);

</script>

</body>
</html>
